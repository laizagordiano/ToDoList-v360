<div style="min-height: 100vh; padding: 40px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
  <div style="max-width: 1100px; margin: 0 auto;">
    
    <!-- Header -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 15px;">
      <div>
        <h1 style="font-size: 36px; font-weight: bold; color: white; margin: 0;">ğŸ“‹ <%= @list.title %></h1>
        <p style="color: rgba(255,255,255,0.9); margin: 8px 0 0 0; font-size: 15px;">
          <strong><%= @tasks.count %></strong> <%= @tasks.count == 1 ? 'tarefa' : 'tarefas' %>
          <% if @tasks.any? %>
            Â· <strong><%= @tasks.where(done: true).count %></strong> concluÃ­das
            <% overdue_count = @tasks.where(done: false).where('due_date < ?', Date.today).count %>
            <% if overdue_count > 0 %>
              Â· <strong style="color: #fca5a5;"><%= overdue_count %></strong> atrasadas
            <% end %>
          <% end %>
        </p>
      </div>
      <%= link_to "â† Voltar", lists_path, style: "background: rgba(255,255,255,0.2); color: white; padding: 12px 24px; border-radius: 10px; text-decoration: none; font-weight: 600; font-size: 14px; white-space: nowrap; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3); transition: all 0.3s;", onmouseover: "this.style.background='rgba(255,255,255,0.3)'", onmouseout: "this.style.background='rgba(255,255,255,0.2)'" %>
    </div>

    <!-- Filtros e OrdenaÃ§Ã£o -->
    <div style="background: rgba(255,255,255,0.95); padding: 20px; border-radius: 16px; margin-bottom: 24px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
      <div style="display: flex; gap: 16px; flex-wrap: wrap; align-items: center; justify-content: space-between;">
        <!-- Filtros -->
        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
          <span style="color: #6b7280; font-weight: 600; font-size: 14px; display: flex; align-items: center;">Filtrar:</span>
          <%= link_to "Todas", list_tasks_path(@list), class: "filter-btn", style: "padding: 8px 16px; border-radius: 8px; text-decoration: none; font-size: 14px; font-weight: 600; transition: all 0.2s; #{params[:filter].nil? ? 'background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;' : 'background: #f3f4f6; color: #6b7280;'}" %>
          <%= link_to "Pendentes", list_tasks_path(@list, filter: 'pending'), style: "padding: 8px 16px; border-radius: 8px; text-decoration: none; font-size: 14px; font-weight: 600; transition: all 0.2s; #{params[:filter] == 'pending' ? 'background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;' : 'background: #f3f4f6; color: #6b7280;'}" %>
          <%= link_to "ConcluÃ­das", list_tasks_path(@list, filter: 'completed'), style: "padding: 8px 16px; border-radius: 8px; text-decoration: none; font-size: 14px; font-weight: 600; transition: all 0.2s; #{params[:filter] == 'completed' ? 'background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;' : 'background: #f3f4f6; color: #6b7280;'}" %>
          <%= link_to "Atrasadas", list_tasks_path(@list, filter: 'overdue'), style: "padding: 8px 16px; border-radius: 8px; text-decoration: none; font-size: 14px; font-weight: 600; transition: all 0.2s; #{params[:filter] == 'overdue' ? 'background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white;' : 'background: #f3f4f6; color: #6b7280;'}" %>
          <%= link_to "Hoje", list_tasks_path(@list, filter: 'today'), style: "padding: 8px 16px; border-radius: 8px; text-decoration: none; font-size: 14px; font-weight: 600; transition: all 0.2s; #{params[:filter] == 'today' ? 'background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white;' : 'background: #f3f4f6; color: #6b7280;'}" %>
        </div>
        
        <!-- OrdenaÃ§Ã£o -->
        <div style="display: flex; gap: 8px; align-items: center;">
          <span style="color: #6b7280; font-weight: 600; font-size: 14px;">Ordenar:</span>
          <%= link_to "ğŸ“… Data", list_tasks_path(@list, sort: 'due_date', filter: params[:filter]), style: "padding: 8px 14px; border-radius: 8px; text-decoration: none; font-size: 13px; font-weight: 600; transition: all 0.2s; #{params[:sort] == 'due_date' ? 'background: #667eea; color: white;' : 'background: #f3f4f6; color: #6b7280;'}" %>
          <%= link_to "âš¡ Status", list_tasks_path(@list, sort: 'status', filter: params[:filter]), style: "padding: 8px 14px; border-radius: 8px; text-decoration: none; font-size: 13px; font-weight: 600; transition: all 0.2s; #{params[:sort] == 'status' ? 'background: #667eea; color: white;' : 'background: #f3f4f6; color: #6b7280;'}" %>
          <%= link_to "ğŸ• Recentes", list_tasks_path(@list, filter: params[:filter]), style: "padding: 8px 14px; border-radius: 8px; text-decoration: none; font-size: 13px; font-weight: 600; transition: all 0.2s; #{params[:sort].nil? ? 'background: #667eea; color: white;' : 'background: #f3f4f6; color: #6b7280;'}" %>
        </div>
      </div>
    </div>

    <!-- FormulÃ¡rio de Nova Tarefa -->
    <div style="background: rgba(255,255,255,0.95); padding: 24px; border-radius: 16px; margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
      <h3 style="color: #667eea; margin: 0 0 16px 0; font-size: 16px; font-weight: 600;">âœ¨ Adicionar Nova Tarefa</h3>
      <%= form_with(model: [@list, Task.new], local: true, style: "display: flex; gap: 12px; flex-wrap: wrap; align-items: end;") do |f| %>
        <div style="flex: 1; min-width: 250px;">
          <%= f.text_field :title, placeholder: "Digite o tÃ­tulo da tarefa...", required: true, style: "width: 100%; border: 2px solid #e5e7eb; padding: 12px 16px; border-radius: 10px; font-size: 15px; outline: none; background: white; color: #1f2937; transition: all 0.2s; box-sizing: border-box;", onfocus: "this.style.borderColor='#667eea'", onblur: "this.style.borderColor='#e5e7eb'" %>
        </div>
        <div style="min-width: 160px;">
          <%= f.date_field :due_date, style: "width: 100%; border: 2px solid #e5e7eb; padding: 12px 16px; border-radius: 10px; font-size: 14px; outline: none; background: white; transition: all 0.2s; box-sizing: border-box;", onfocus: "this.style.borderColor='#667eea'", onblur: "this.style.borderColor='#e5e7eb'" %>
        </div>
        <%= f.submit "â• Adicionar", style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 28px; border-radius: 10px; font-weight: bold; font-size: 14px; cursor: pointer; transition: all 0.3s; white-space: nowrap; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);", onmouseover: "this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.5)'", onmouseout: "this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.4)'" %>
      <% end %>
    </div>

    <!-- Lista de Tarefas -->
    <% if @tasks.any? %>
      <div style="display: grid; gap: 14px;">
        <% @tasks.each do |task| %>
          <div style="background: white; border-radius: 14px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); transition: all 0.3s; border-left: 4px solid <%= task.done ? '#10b981' : (task_status(task) == :overdue ? '#ef4444' : '#667eea') %>;" onmouseover="this.style.boxShadow='0 6px 20px rgba(0,0,0,0.12)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.boxShadow='0 2px 10px rgba(0,0,0,0.08)'; this.style.transform='translateY(0)'">
            <div style="display: flex; justify-content: space-between; align-items: start; gap: 16px;">
              <!-- Checkbox e TÃ­tulo -->
              <div style="display: flex; align-items: start; gap: 14px; flex: 1;">
                <%= form_with(model: [@list, task], method: :patch, local: true, style: "display: flex; align-items: start; gap: 14px; width: 100%;") do |f| %>
                  <%= f.check_box :done, { 
                    onchange: "this.form.submit()", 
                    style: "width: 22px; height: 22px; margin-top: 2px; cursor: pointer; accent-color: #10b981; flex-shrink: 0;" 
                  } %>
                  <div style="flex: 1;">
                    <p style="margin: 0 0 8px 0; font-size: 16px; color: #1f2937; font-weight: 500; line-height: 1.5; <%= task.done ? 'text-decoration: line-through; opacity: 0.6;' : '' %>">
                      <%= task.title %>
                    </p>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                      <%= task_status_badge(task) %>
                      <% if task.due_date %>
                        <span style="color: #6b7280; font-size: 13px; display: flex; align-items: center; gap: 4px;">
                          ğŸ“… <%= friendly_due_date(task.due_date) %>
                        </span>
                      <% end %>
                    </div>
                  </div>
                <% end %>
              </div>
              
              <!-- AÃ§Ãµes -->
              <div style="display: flex; gap: 8px; flex-shrink: 0;">
                <%= link_to "âœï¸", edit_list_task_path(@list, task), style: "display: flex; align-items: center; justify-content: center; width: 36px; height: 36px; background: #f3f4f6; border-radius: 8px; text-decoration: none; transition: all 0.2s; font-size: 16px;", onmouseover: "this.style.background='#e5e7eb'", onmouseout: "this.style.background='#f3f4f6'", title: "Editar" %>
                <%= button_to "ğŸ—‘ï¸", list_task_path(@list, task), method: :delete, form: { data: { turbo_confirm: "Tem certeza que deseja excluir esta tarefa?" }, style: "display: inline;" }, style: "display: flex; align-items: center; justify-content: center; width: 36px; height: 36px; background: #fee2e2; border: none; border-radius: 8px; cursor: pointer; transition: all 0.2s; font-size: 16px;", onmouseover: "this.style.background='#fecaca'", onmouseout: "this.style.background='#fee2e2'", title: "Excluir" %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <!-- Empty State -->
      <div style="background: white; border-radius: 20px; padding: 60px 40px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
        <div style="font-size: 80px; margin-bottom: 20px; opacity: 0.3;">
          <% if params[:filter].present? %>
            ğŸ”
          <% else %>
            âœ¨
          <% end %>
        </div>
        <h2 style="font-size: 24px; font-weight: bold; color: #1f2937; margin: 0 0 12px 0;">
          <% if params[:filter] == 'completed' %>
            Nenhuma tarefa concluÃ­da
          <% elsif params[:filter] == 'pending' %>
            Nenhuma tarefa pendente
          <% elsif params[:filter] == 'overdue' %>
            ğŸ‰ Nenhuma tarefa atrasada!
          <% elsif params[:filter] == 'today' %>
            Nenhuma tarefa para hoje
          <% else %>
            Nenhuma tarefa ainda
          <% end %>
        </h2>
        <p style="color: #6b7280; font-size: 16px; margin: 0 0 24px 0; line-height: 1.6;">
          <% if params[:filter].present? %>
            Tente ajustar os filtros ou criar uma nova tarefa.
          <% else %>
            Comece criando sua primeira tarefa acima!
          <% end %>
        </p>
        <% unless params[:filter].present? %>
          <button onclick="document.querySelector('input[name=&quot;task[title]&quot;]').focus()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 14px 32px; border-radius: 10px; font-weight: bold; font-size: 15px; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.4)'">
            â• Criar primeira tarefa
          </button>
        <% end %>
      </div>
    <% end %>

  </div>
</div>
